# SQLite file for local dev
DATABASE_URL="file:./dev.db"

# Optional: admin key that can list/retrieve all runs across tokens.
# If unset, every request must still present a Bearer token, but runs are scoped to that token.
OZ_ADMIN_API_KEY="change-me"

# Server
OZ_CONTROL_PLANE_PORT=8080

# Optional: CORS allowlist origin (useful when the workspace is hosted on a different origin).
# OZ_CORS_ORIGIN="https://your-workspace.example"

# Startup hardening
# If OZ_ADMIN_API_KEY is intentionally unset for dev, allow boot with:
# OZ_ALLOW_NO_ADMIN_KEY=true
#
# Optional: validate provider configuration at startup instead of failing on first run.
# OZ_STARTUP_VALIDATE_PROVIDERS=true
# OZ_VALIDATE_HARNESSES=custom,glm,claude-code
#
# Optional: require sidecar image to be set (useful in worker-only deployments).
# OZ_REQUIRE_WORKER_SIDECAR=true
#
# The quota router has a legacy global shim that is disabled by default.
# If you run older code paths that still call unscoped quota functions, you can temporarily enable it:
# OZ_ALLOW_GLOBAL_QUOTA_SHIM=true

# Logging
# OZ_LOG_LEVEL=info   # debug|info|warn|error

# Required for oz-agent-worker integration (self-hosted Docker workers).
# The worker mounts the full filesystem of this image at /agent in the task container.
OZ_WORKER_SIDECAR_IMAGE="oz-agent-sidecar:dev"

# Optional: allow passing a raw Docker image string as config.environment_id when no Environment record exists.
# Default: false (safer; require /api/v1/environments objects).
# OZ_ALLOW_RAW_ENV_IMAGE=true

# Optional: if a run is CLAIMED but not marked INPROGRESS within this window, requeue it back to PENDING.
# OZ_WORKER_CLAIM_TIMEOUT_MS=120000

# Data retention (terminal AgentRun rows)
# OZ_RUN_RETENTION_DAYS=30
# OZ_RETENTION_SWEEP_INTERVAL_MS=3600000

# Provider routing / fallback (same env contract as oz-workspace local runner)
# OZ_PROVIDER_FALLBACK_ORDER=glm,kimi,custom
# OZ_QUEUE_ON_SATURATION=true
# OZ_QUEUE_MAX_WAIT_SECONDS=300

# Example OpenAI-compatible provider
# OZ_PROVIDER_GLM_TYPE=openai_compatible
# OZ_PROVIDER_GLM_BASE_URL=https://example.com/v1
# OZ_PROVIDER_GLM_API_KEY=...
# OZ_PROVIDER_GLM_MODEL=glm-4
# OZ_PROVIDER_GLM_MSG_LIMIT=100
# OZ_PROVIDER_GLM_WINDOW_SECONDS=60
